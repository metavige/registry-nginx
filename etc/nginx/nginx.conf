worker_processes  1;

error_log /dev/stdout info;

#pid        logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
        include       mime.types;
        default_type  application/octet-stream;

        access_log /dev/stdout;

        sendfile        on;
        #tcp_nopush     on;

        #keepalive_timeout  0;
        keepalive_timeout  65;

        #gzip  on;

        server {
                listen 80 default_server;

                root /usr/share/nginx/html;
                index index.html index.htm;

                location / {
                    auth_basic "Restricted";
                    auth_basic_user_file /.htpasswd;
                    proxy_pass http://docker-registry:5000;
                }

                location /v1/_ping {
                    auth_basic off;
                    proxy_pass http://docker-registry:5000;
                }

                location /_ping {
                    auth_basic off;
                    proxy_pass http://docker-registry:5000;
                }
        }
}

daemon off;
